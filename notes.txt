<?php

//CONTROLLER
function list_action() {
	$posts = get_all_posts();
	require 'templates/list.php';
}

function show_action($id) {
	$post = get_post_by_id($id);
	require 'templates/show.php';
}


function get_all_posts() {
	$link = open_database_connection();
	$result = $link->query("SELECT id, titre FROM posts");
	$posts = array();
	while($row = $result->fetch(PDO::FETCH_ASSOC)) {
		$posts[] = $row;
	}
	close_database_connection($link);
	return $posts;
}


FUNCTION CHCK

foreach ($_POST as $key => $value) 
		{
			if ($key == 'btnContinue')
			{
				continue;
			}
			elseif (empty($_POST[$key]))
			{
				$firstLoginErrors[] = $key." est vide.";
			}
		}
		return $firstLoginErrors;

		//S'il y a erreures, retour vers formulaire
		if ($firstLoginErrors)
		{
			header('/webbing/index.php');
		}
		//sans erreurs, lancer la fonction pour authentification
		else
		{	
			get_users_firstConnection($_POST['prenom'], $_POST['nom']);
		}